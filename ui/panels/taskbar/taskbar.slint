import { Clock, ClockState } from "clock.slint";
import { Battery, BatteryData, BatteryState } from "battery.slint";

export component Taskbar inherits Window {
    // State properties
    in-out property <ClockState> clock-state: {
        time: "00:00",
        date: "Mon, Jan 1",
    };

    in-out property <BatteryData> battery-data: {
        percentage: 0,
        state: BatteryState.Unknown,
        time_remaining: "",
    };

    // Callbacks
    callback update-clock();
    callback update-battery();
    
    // Timer to update clock every second
    Timer {
        interval: 1s;
        running: true;
        triggered => {
            root.update-clock();
        }
    }

    // Main window styling
    background: #222;
    height: 48px;

    // Main layout: 3-section row (left | center | right)
    HorizontalLayout {
        padding-left: 8px;
        padding-right: 8px;
        spacing: 8px;

        // === LEFT SECTION ===
        // (Future: App menu, workspaces, etc.)
        Rectangle {
            horizontal-stretch: 1;
            // Placeholder for left-aligned items
        }

        // === CENTER SECTION ===
        // (Future: Window title, media controls, etc.)
        // Currently empty - items will go here

        // === RIGHT SECTION ===
        HorizontalLayout {
            spacing: 8px;
            alignment: end;

            Battery {
                data: root.battery-data;
            }

            Clock {
                state: root.clock-state;
            }
        }
    }
}
