import { Clock, ClockState } from "clock.slint";
import { Battery, BatteryData, BatterState } from "battery.slint";

export component Taskbar inherits Window {
    in-out property <ClockState> clock-state: {
        time: "00:00",
        date: "Mon, Jan 1",
    };

    in-out property <BatteryData> battery-state: {
        percentage: 0,
        state: BatterState.Unknown,
        icon: "ó°‚‘",
    };
    callback update-clock();
    
    // Timer to update clock every second
    Timer {
        interval: 1s;
        running: true;
        triggered => {
            root.update-clock();
        }
    }

    background: #222;
    height: 48px;

    HorizontalLayout {
        padding-left: 8px;
        padding-right: 8px;
        spacing: 8px;
        
        Rectangle { 
            horizontal-stretch: 1;
        }

        Battery {
            state: root.battery-state;
        }

        Clock {
            state: root.clock-state;
        }
    }
}
